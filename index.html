<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Robot Eyes</title>
  <style>
    /* Base styles */
    body {
      margin: 0;
      min-height: 100vh;
      background: #f3f4f6;
      font-family: system-ui, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 2rem;
    }
    .card {
      max-width: 48rem;
      width: 100%;
      background: white;
      border-radius: 1rem;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      margin: auto;
    }
    .card-header {
      text-align: center;
      padding: 1.5rem;
    }
    .card-title {
      font-size: 2rem;
      font-weight: bold;
    }
    .card-content {
      padding: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    /* Eye container */
    .eye-box {
      width: 24rem;
      height: 16rem;
      background: black;
      border-radius: 2rem;
      margin-bottom: 2rem;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      cursor: crosshair;
    }
    .eyes {
      display: flex;
      gap: 3.5rem;
      position: relative;
      transition: all 0.8s ease-in-out;
    }
    .eye-container {
      width: 6rem;
      height: 6rem;
      position: relative;
      overflow: visible;
    }
    .eye {
      width: 5.5rem;
      height: 5.5rem;
      background: #3b82f6;
      border-radius: 0.5rem;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }
    /* Transition classes */
    .eyes.transitioning {
      transition: all 0.8s ease-in-out;
    }
    .eye.transitioning {
      transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }
    /* Happy expression */
    .eye.happy {
      height: 3rem;
      border-radius: 2.75rem 2.75rem 0 0;
      animation: happy-bounce 0.3s ease-in-out infinite;
    }
    @keyframes happy-bounce {
      0% { transform: translate(-50%, -50%) translateY(-2.5rem); }
      50% { transform: translate(-50%, -50%) translateY(-2.7rem); }
      100% { transform: translate(-50%, -50%) translateY(-2.5rem); }
    }
    /* Happy mouth */
    .happy-mouth {
      position: absolute;
      width: 4rem;
      height: 2rem;
      border: 0.2rem solid transparent;
      bottom: 30%;
      left: 50%;
      transform: translateX(-50%);
      box-sizing: border-box;
      border-radius: 0 0 4rem 4rem;
      border-bottom-color: #3b82f6;
      border-left-color: #3b82f6;
      border-right-color: #3b82f6;
      opacity: 0;
      display: none;
      z-index: 5;
    }
    .happy-mouth.active {
      display: block;
      animation: happy-mouth-appear 1s ease-in-out forwards;
    }
    @keyframes happy-mouth-appear {
      0% { 
        opacity: 0;
        width: 2rem;
        height: 1rem;
        border-width: 0.1rem;
        transform: translateX(-50%) scale(0.5);
      }
      50% { 
        opacity: 0.8;
        width: 3rem;
        height: 1.5rem;
        border-width: 0.15rem;
        transform: translateX(-50%) scale(0.8);
      }
      100% { 
        opacity: 1;
        width: 4rem;
        height: 2rem;
        border-width: 0.2rem;
        transform: translateX(-50%) scale(1);
      }
    }
    /* Sad expression */
    .eye.sad {
      background: #1e40af;
      height: 2.75rem;
      width: 5.5rem;
      border-radius: 0 0 2.75rem 2.75rem;
      transform: translate(-50%, -50%);
      animation: sad-transition 3s ease-in-out forwards;
    }
    @keyframes sad-transition {
      0% { 
        height: 5.5rem;
        border-radius: 0.5rem;
        transform: translate(-50%, -50%);
      }
      50% { 
        height: 2.75rem;
        border-radius: 0 0 2.75rem 2.75rem;
        transform: translate(-50%, -50%);
      }
      100% { 
        height: 2.75rem;
        border-radius: 0 0 2.75rem 2.75rem;
        transform: translate(-50%, -50%) translateY(2rem);
      }
    }
    /* Sad mouth */
    .sad-mouth {
      position: absolute;
      width: 4rem;
      height: 4rem;
      border: 0.2rem solid transparent;
      bottom: 45%;
      left: 50%;
      transform: translateX(-50%);
      box-sizing: border-box;
      border-radius: 50%;
      border-top-color: #374151;
      opacity: 0;
      display: none;
      z-index: 5;
      transition: all 0.5s ease-in-out;
    }
    .sad-mouth.active {
      display: block;
      animation: sad-mouth-appear 3s ease-in-out forwards;
    }
    @keyframes sad-mouth-appear {
      0% { 
        opacity: 0;
        width: 2rem;
        height: 2rem;
        border-width: 0.1rem;
        transform: translateX(-50%) translateY(0) scale(0.5);
        bottom: 20%;
      }
      30% { 
        opacity: 0.7;
        width: 3rem;
        height: 3rem;
        border-width: 0.15rem;
        transform: translateX(-50%) translateY(0.5rem) scale(0.8);
        bottom: 18%;
      }
      60% { 
        opacity: 0.9;
        width: 3.5rem;
        height: 3.5rem;
        border-width: 0.18rem;
        transform: translateX(-50%) translateY(1rem) scale(0.9);
        bottom: 16%;
      }
      100% { 
        opacity: 1;
        width: 4rem;
        height: 4rem;
        border-width: 0.2rem;
        transform: translateX(-50%) translateY(1.5rem) scale(1);
        bottom: 14%;
      }
    }
    /* Angry expression */
    .eye.angry {
      background: #dc2626;
      height: 5.5rem;
      width: 6rem;
      clip-path: polygon(100% 0%, 100% 100%, 0% 50%);
      transform: translate(-50%, -50%);
      animation: angry-shake 0.1s ease-in-out infinite;
    }
    .eye.angry.left {
      clip-path: polygon(0% 0%, 100% 50%, 0% 100%);
      transform: translate(-50%, -50%) scaleX(-1);
    }
    @keyframes angry-shake {
      0% { transform: translate(-50%, -50%) translateY(3rem); }
      25% { transform: translate(-50%, -50%) translate(0.1rem, 3rem); }
      50% { transform: translate(-50%, -50%) translate(-0.1rem, 3rem); }
      75% { transform: translate(-50%, -50%) translate(0.1rem, 3rem); }
      100% { transform: translate(-50%, -50%) translateY(3rem); }
    }
    /* Dizzy expression */
    .eye.dizzy {
      background: transparent;
    }
    .eye.dizzy::before {
      content: '';
      --b: 8px;
      --s: 80px;
      --c: #CD8C52;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: var(--s);
      aspect-ratio: 1;
      background: 
        repeating-radial-gradient(calc(2*var(--b)) at top,#0000 -1px,var(--c) 0 calc(50% - 1px),#0000 50% calc(100% - 1px)) calc(50% + var(--b)) 100%, 
        repeating-radial-gradient(calc(2*var(--b)) at bottom,var(--c) -1px,#0000 0 calc(50% - 1px),var(--c) 50% calc(100% - 1px)) 50% 0;
      background-size: 150% 50%;
      background-repeat: no-repeat;
      mask: 
        radial-gradient(calc(1.5*var(--b)) at calc(100% - var(--b)/2) 0, #0000 calc(100%/3), #000 calc(100%/3 + 1px) 110%, #0000 0) calc(50% + var(--b)/2) 
         100%/calc(3*var(--b)) 50% exclude no-repeat, 
        conic-gradient(#000 0 0);
      animation: spiral-rotate 1s linear infinite;
    }
    @keyframes spiral-rotate {
      to { transform: translate(-50%, -50%) rotate(-360deg); }
    }
    /* Love expression */
    .eye.love {
      background: #ec4899;
      border-radius: 50%;
      position: relative;
      animation: love-pulse 0.8s ease-in-out infinite;
    }
    .eye.love::before {
      content: 'â™¥';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 5rem;
      color: white;
      animation: heart-beat 0.8s ease-in-out infinite;
    }
    @keyframes love-pulse {
      0% { transform: translate(-50%, -50%) scale(1); }
      50% { transform: translate(-50%, -50%) scale(1.1); }
      100% { transform: translate(-50%, -50%) scale(1); }
    }
    @keyframes heart-beat {
      0% { transform: translate(-50%, -50%) scale(1); }
      25% { transform: translate(-50%, -50%) scale(1.2); }
      50% { transform: translate(-50%, -50%) scale(1); }
      75% { transform: translate(-50%, -50%) scale(1.1); }
      100% { transform: translate(-50%, -50%) scale(1); }
    }
    /* Sleepy expression */
    .eye.sleepy {
      background: #6b7280;
      height: 0.5rem;
      width: 5.5rem;
      border-radius: 0.25rem;
      transform: translate(-50%, -50%) translateY(3rem);
      animation: sleepy-breathe 2s ease-in-out infinite;
    }
    @keyframes sleepy-breathe {
      0% { transform: translate(-50%, -50%) translateY(3rem) scaleY(1); }
      50% { transform: translate(-50%, -50%) translateY(3rem) scaleY(0.8); }
      100% { transform: translate(-50%, -50%) translateY(3rem) scaleY(1); }
    }
    /* Sleep symbol */
    .sleep-symbol {
      position: absolute;
      top: 15%;
      right: 15%;
      font-size: 2.5rem;
      opacity: 0;
      animation: sleep-float 3s ease-in-out infinite;
      z-index: 10;
      display: none;
    }
    @keyframes sleep-float {
      0% { 
        opacity: 0.8;
        transform: translateY(0) scale(1);
      }
      50% { 
        opacity: 1;
        transform: translateY(-1rem) scale(1.1);
      }
      100% { 
        opacity: 0.8;
        transform: translateY(0) scale(1);
      }
    }
    /* Waking expression */
    .eye.waking {
      background: #6b7280;
      height: 2.5rem;
      width: 5.5rem;
      transform: translate(-50%, -50%) translateY(3rem);
      animation: waking-movement 6s ease-in-out forwards;
    }
    @keyframes waking-movement {
      0% { 
        height: 0.5rem;
        transform: translate(-50%, -50%) translateY(3rem);
      }
      20% { 
        height: 2.5rem;
        transform: translate(-50%, -50%) translateY(3rem);
      }
      35% { 
        height: 2.5rem;
        transform: translate(-50%, -50%) translateY(3rem) translateX(-2rem);
      }
      50% { 
        height: 2.5rem;
        transform: translate(-50%, -50%) translateY(3rem) translateX(2rem);
      }
      65% { 
        height: 2.5rem;
        transform: translate(-50%, -50%) translateY(3rem) translateX(-2rem);
      }
      80% { 
        height: 2.5rem;
        transform: translate(-50%, -50%) translateY(3rem);
      }
      100% { 
        height: 2.5rem;
        transform: translate(-50%, -50%) translateY(0);
      }
    }
    /* Sleep bubble pop */
    .sleep-symbol.popping {
      animation: sleep-bubble-pop 2s ease-out forwards;
    }
    @keyframes sleep-bubble-pop {
      0% { 
        opacity: 1;
        transform: translateY(0) scale(1);
      }
      50% { 
        opacity: 1;
        transform: translateY(-2rem) scale(1.5);
      }
      80% { 
        opacity: 0.5;
        transform: translateY(-3rem) scale(2);
      }
      100% { 
        opacity: 0;
        transform: translateY(-4rem) scale(0);
        display: none;
      }
    }
    /* Anger symbol */
    .anger-symbol {
      position: absolute;
      top: 20%;
      right: 20%;
      font-size: 2.5rem;
      opacity: 0;
      animation: pulse 0.5s ease-in-out infinite alternate;
      z-index: 10;
      display: none;
    }
    /* Blinking */
    .blink {
      height: 0.25rem !important;
      transform: scaleY(0.05) translate(-50%, -50%) !important;
      transition: transform 0.15s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }
    /* Controls */
    .controls-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.75rem;
      width: 100%;
      max-width: 32rem;
    }
    .control-button {
      padding: 0.75rem;
      background: #e5e7eb;
      border-radius: 0.5rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
    }
    .control-button:hover {
      background: #d1d5db;
    }
    .control-button.active {
      background: #1f2937;
      color: white;
      transform: scale(1.05);
    }
    /* Disable controls during expressions */
    .expression-active .control-button {
      pointer-events: none;
      opacity: 0.6;
    }
  </style>
</head>
<body>
  <div class="card">
    <div class="card-header">
      <div class="card-title">Expressive Robot Eyes</div>
    </div>
    <div class="card-content">
      <!-- Eye Display -->
      <div class="eye-box" id="eye-box">
        <div class="eyes" id="eyes">
          <!-- Left Eye -->
          <div class="eye-container">
            <div class="eye" id="left-eye"></div>
          </div>
          <!-- Right Eye -->
          <div class="eye-container">
            <div class="eye" id="right-eye"></div>
          </div>
        </div>
        <!-- Symbols -->
        <div class="anger-symbol" id="anger-symbol">ðŸ’¢</div>
        <div class="sleep-symbol" id="sleep-symbol">ðŸ’¤</div>
        <!-- Mouths -->
        <div class="sad-mouth" id="sad-mouth"></div>
        <div class="happy-mouth" id="happy-mouth"></div>
      </div>
      <!-- Controls -->
      <div class="controls-grid" id="controls">
        <label>
          <input type="checkbox" id="idle-mode" checked>
          Idle Mode
        </label>
        <button data-dir="center">Center</button>
        <button data-dir="left">Left</button>
        <button data-dir="right">Right</button>
        <button data-dir="up">Up</button>
        <button data-dir="down">Down</button>
        <button data-dir="up-left">Up-Left</button>
        <button data-dir="up-right">Up-Right</button>
        <button data-dir="down-left">Down-Left</button>
        <button data-dir="down-right">Down-Right</button>
        <button data-dir="wide-left">Wide Left</button>
        <button data-dir="wide-right">Wide Right</button>
        <button data-dir="wide-up">Wide Up</button>
        <button data-dir="wide-down">Wide Down</button>
        <button data-expr="happy">ðŸ˜„ Happy</button>
        <button data-expr="sad">ðŸ˜¢ Sad</button>
        <button data-expr="angry">ðŸ˜  Angry</button>
        <button data-expr="dizzy">ðŸ’« Dizzy</button>
        <button data-expr="love">ðŸ’– Love</button>
        <button data-expr="sleepy">ðŸ˜´ Sleepy</button>
        <button data-expr="waking">ðŸ˜ª Waking Up</button>
      </div>
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const LOOK_DIRECTIONS = {
        center: 'translate(0, 0)',
        left: 'translateX(-2rem)',
        right: 'translateX(2rem)',
        up: 'translateY(-2rem)',
        down: 'translateY(2rem)',
        'up-left': 'translate(-2rem, -2rem)',
        'up-right': 'translate(2rem, -2rem)',
        'down-left': 'translate(-2rem, 2rem)',
        'down-right': 'translate(2rem, 2rem)',
        'wide-left': 'translateX(-3rem)',
        'wide-right': 'translateX(3rem)',
        'wide-up': 'translateY(-3rem)',
        'wide-down': 'translateY(3rem)'
      };
      let isBlinking = false;
      let lookDirection = 'center';
      let isIdleMode = true;
      let idleTimer = null;
      let isExpressionActive = false;
      let currentExpression = null;
      const leftEye = document.getElementById('left-eye');
      const rightEye = document.getElementById('right-eye');
      const eyes = document.getElementById('eyes');
      const idleMode = document.getElementById('idle-mode');
      const angerSymbol = document.getElementById('anger-symbol');
      const sleepSymbol = document.getElementById('sleep-symbol');
      const sadMouth = document.getElementById('sad-mouth');
      const happyMouth = document.getElementById('happy-mouth');
      const controls = document.getElementById('controls');
      const eyeBox = document.getElementById('eye-box');
      if (![leftEye, rightEye, eyes, idleMode, angerSymbol, sleepSymbol, sadMouth, happyMouth].every(el => el)) {
        console.error('Required DOM elements not found!');
        return;
      }
      // Core functions
      function clearIdleTimer() {
        if (idleTimer) clearTimeout(idleTimer);
      }
      function setEyePosition(direction) {
        if (isExpressionActive) return;
        const transform = LOOK_DIRECTIONS[direction] || 'translate(0, 0)';
        const fullTransform = `translate(-50%, -50%) ${transform}`;
        leftEye.style.transform = fullTransform;
        rightEye.style.transform = fullTransform;
        Array.from(controls.querySelectorAll('[data-dir]')).forEach(btn => 
          btn.classList.toggle('active', btn.dataset.dir === direction)
        );
      }
      function resetEyes() {
        eyes.classList.remove('transitioning');
        leftEye.classList = 'eye';
        rightEye.classList = 'eye';
        angerSymbol.style.display = 'none';
        sleepSymbol.style.display = 'none';
        sadMouth.style.display = 'none';
        happyMouth.style.display = 'none';
        currentExpression = null;
        isExpressionActive = false;
        setEyePosition('center');
      }
      function setupBlinking() {
        const blink = () => {
          if (isBlinking || isExpressionActive) return;
          isBlinking = true;
          leftEye.classList.add('blink');
          rightEye.classList.add('blink');
          setTimeout(() => {
            leftEye.classList.remove('blink');
            rightEye.classList.remove('blink');
            isBlinking = false;
          }, 150);
          setTimeout(blink, Math.random() * 2000 + 2000);
        };
        setTimeout(blink, Math.random() * 1500 + 1000);
      }
      function setupIdleMovement() {
        if (!isIdleMode || isExpressionActive) {
          clearIdleTimer();
          return;
        }
        const directions = Object.keys(LOOK_DIRECTIONS);
        const moveEyes = () => {
          if (isExpressionActive) return;
          const newDirection = directions[Math.floor(Math.random() * directions.length)];
          if (newDirection !== lookDirection || Math.random() < 0.3) {
            lookDirection = newDirection;
            setEyePosition(newDirection);
          }
          idleTimer = setTimeout(moveEyes, Math.random() * 2000 + 1500);
        };
        idleTimer = setTimeout(moveEyes, Math.random() * 1500 + 1000);
      }
      // Expression system
      function setExpression(expression) {
        if (isExpressionActive) return;
        isExpressionActive = true;
        currentExpression = expression;
        clearIdleTimer();
        resetEyes();
        eyes.classList.add('transitioning');
        leftEye.classList.add('transitioning');
        rightEye.classList.add('transitioning');
        controls.style.pointerEvents = 'none';
        controls.style.opacity = '0.6';
        
        const expressionDuration = 8000;
        let exprEnd = () => {
          resetEyes();
          eyes.classList.remove('transitioning');
          leftEye.classList.remove('transitioning');
          rightEye.classList.remove('transitioning');
          controls.style.pointerEvents = '';
          controls.style.opacity = '';
          if (idleMode.checked) setupIdleMovement();
        };

        switch(expression) {
          case 'happy':
            leftEye.className = 'eye happy transitioning';
            rightEye.className = 'eye happy transitioning';
            happyMouth.style.display = 'block';
            happyMouth.classList.add('active');
            exprEnd = () => {
              happyMouth.classList.remove('active');
              happyMouth.style.display = 'none';
              exprEnd();
            };
            break;
          case 'sad':
            leftEye.className = 'eye sad transitioning';
            rightEye.className = 'eye sad transitioning';
            sadMouth.style.display = 'block';
            sadMouth.classList.add('active');
            exprEnd = () => {
              sadMouth.classList.remove('active');
              sadMouth.style.display = 'none';
              exprEnd();
            };
            break;
          case 'angry':
            leftEye.className = `eye angry left transitioning`;
            rightEye.className = `eye angry right transitioning`;
            angerSymbol.style.display = 'block';
            angerSymbol.style.opacity = '1';
            exprEnd = () => {
              angerSymbol.style.display = 'none';
              exprEnd();
            };
            break;
          case 'sleepy':
            leftEye.className = 'eye sleepy transitioning';
            rightEye.className = 'eye sleepy transitioning';
            sleepSymbol.style.display = 'block';
            sleepSymbol.style.opacity = '1';
            exprEnd = () => {
              sleepSymbol.style.display = 'none';
              exprEnd();
            };
            break;
          case 'waking':
            leftEye.className = 'eye waking transitioning';
            rightEye.className = 'eye waking transitioning';
            sleepSymbol.className = 'sleep-symbol popping';
            sleepSymbol.style.display = 'block';
            exprEnd = () => {
              sleepSymbol.className = 'sleep-symbol';
              sleepSymbol.style.display = 'none';
              exprEnd();
            };
            break;
          case 'dizzy':
            leftEye.className = 'eye dizzy transitioning';
            rightEye.className = 'eye dizzy transitioning';
            break;
          case 'love':
            leftEye.className = 'eye love transitioning';
            rightEye.className = 'eye love transitioning';
            break;
        }
        
        setTimeout(exprEnd, expressionDuration);
      }
      // Event listeners
      controls.addEventListener('click', function(e) {
        const exprBtn = e.target.closest('[data-expr]');
        if (exprBtn) {
          setExpression(exprBtn.dataset.expr);
          return;
        }
        const dirBtn = e.target.closest('[data-dir]');
        if (dirBtn && !isExpressionActive) {
          setEyePosition(dirBtn.dataset.dir);
        }
      });
      eyeBox.addEventListener('mousemove', function(e) {
        if (isIdleMode || isExpressionActive) return;
        const rect = this.getBoundingClientRect();
        const centerX = rect.left + rect.width/2;
        const centerY = rect.top + rect.height/2;
        const x = e.clientX;
        const y = e.clientY;
        let direction = 'center';
        if (x < centerX-100 && y < centerY-60) direction = 'up-left';
        else if (x > centerX+100 && y < centerY-60) direction = 'up-right';
        else if (x < centerX-100 && y > centerY+60) direction = 'down-left';
        else if (x > centerX+100 && y > centerY+60) direction = 'down-right';
        else if (x < centerX-60) direction = 'left';
        else if (x > centerX+60) direction = 'right';
        else if (y < centerY-60) direction = 'up';
        else if (y > centerY+60) direction = 'down';
        setEyePosition(direction);
      });
      idleMode.addEventListener('change', function() {
        isIdleMode = this.checked;
        if (isIdleMode) setupIdleMovement();
        else {
          clearIdleTimer();
          setEyePosition('center');
        }
      });
      // Initialize
      setupBlinking();
      setupIdleMovement();
    });
  </script>
</body>
</html>
